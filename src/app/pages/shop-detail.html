<div class="shop-detail-container" *ngIf="!loading && shop">
  <!-- ุฏฺฉูู ุจุฑฺฏุดุช -->
  <button (click)="goBack()" class="back-button">๐ ุจุงุฒฺฏุดุช ุจู ูุณุช ูุฑูุดฺฏุงูโูุง</button>

  <!-- ุจุฎุด ุงุตู ูุฑูุดฺฏุงู -->
  <div class="shop-header">
    <img [src]="coverSrc" alt="ฺฉุงูุฑ ูุฑูุดฺฏุงู" class="shop-cover-image" (error)="coverSrc = fallbackImage">
    <div class="shop-info">
      <h1>{{ shop.name || 'ุจุฏูู ูุงู' }}</h1>
      <p class="description">{{ shop.description || 'ุชูุถุญุงุช ุซุจุช ูุดุฏู.' }}</p>
      
      <!-- ุฌุฒุฆุงุช ุงุตู -->
      <p><strong>ุฏุณุชูโุจูุฏ:</strong> {{ shop.category }}</p>
      <p><strong>ุฒููู ุตูุนุช:</strong> {{ shop.industrialField }}</p>
      <p><strong>ุงุณุชุงู/ุดูุฑ:</strong> {{ shop.province }} / {{ shop.city }}</p>
      <p><strong>ูุดุงู:</strong> {{ shop.address }}</p>

      <!-- ุงุทูุงุนุงุช ุชูุงุณ -->
      <h3>ุงุทูุงุนุงุช ุชูุงุณ</h3>
      <p><strong>ุชููู:</strong> {{ shop.phone || '-' }}</p>
      <p><strong>ุงูู:</strong> {{ shop.email || '-' }}</p>
      <p><strong>ูุจุณุงุช:</strong> <a [href]="shop.website" target="_blank">{{ shop.website || '-' }}</a></p>
    </div>
  </div>

  <!-- ุนููุงุช ูุฏุฑุช (ููุท ุจุฑุง ูุงูฺฉ) -->
  <div class="owner-actions" *ngIf="isOwner">
    <h3>ุนููุงุช ูุฑูุดฺฏุงู</h3>
    <button (click)="editShop(shop.id)" class="edit-button">โ๏ธ ูุฑุงุด ูุฑูุดฺฏุงู</button>
    <button (click)="deleteShop(shop.id)" class="delete-button">๐๏ธ ุญุฐู ูุฑูุดฺฏุงู</button>
    <!-- โ ุงุตูุงุญ ุดุฏ: ุงุณุชูุงุฏู ุงุฒ routerLink ุจู ุฌุง ูุชุฏ ุฎุทุงโุฏููุฏู manageProducts -->
    <button [routerLink]="['/shop', shop.id, 'products']" class="manage-products-button">๐ฆ ูุฏุฑุช ูุญุตููุงุช</button>
  </div>
  
  <!-- ฺฏุงูุฑ ุชุตุงูุฑ -->
  <div class="gallery-section" *ngIf="galleryItems.length > 0">
    <h2>๐ผ๏ธ ฺฏุงูุฑ ุชุฌูุฒุงุช ู ูุญุตููุงุช</h2>
    <div class="gallery-grid">
      <img *ngFor="let item of galleryItems" [src]="item" alt="ุชุตูุฑ ฺฏุงูุฑ">
    </div>
  </div>
  <div class="gallery-section" *ngIf="galleryItems.length === 0">
    <p>ฺฏุงูุฑ ุซุจุช ูุดุฏู ุงุณุช.</p>
  </div>

  <!-- ูุญุตููุงุช -->
  <div class="products-section">
    <h2>๐ฆ ูุญุตููุงุช ูุฑูุดฺฏุงู</h2>
    <div *ngIf="products.length === 0" class="no-products">
      <p>ูุญุตูู ุจุฑุง ุงู ูุฑูุดฺฏุงู ุซุจุช ูุดุฏู ุงุณุช.</p>
    </div>
    <div class="products-grid" *ngIf="products.length > 0">
      <div class="product-card" *ngFor="let p of products">
        <img [src]="p.imageUrl" alt="{{ p.name }}" (error)="handleImageError(p)">
        <h4>{{ p.name }}</h4>
        <p>{{ p.description }}</p>
        <!-- โ๏ธ ุงุตูุงุญ pipe ูุงุญุฏ ูพูู: ุจุฑุง ูุงุญุฏ ูพูู ุงุฑุงู (ุฑุงู/ุชููุงู) ุจูุชุฑ ุงุณุช ุงุฒ '1.0-0' ุงุณุชูุงุฏู ุดูุฏ ุชุง ุงุนุดุงุฑ ูุฏุงุดุชู ุจุงุดุฏ -->
        <p class="price"><strong>๐ฐ ููุช:</strong> {{ p.price | currency:'IRR':'symbol':'1.0-0' }}</p>
      </div>
    </div>
  </div>
  
  <div class="national-support">
    ๐ฎ๐ท ุญูุงุช ุงุฒ ุชููุฏ ูู โ ุจุง ุฎุฑุฏ ุงุฒ ุงู ูุฑูุดฺฏุงูุ ุงุฒ ุชููุฏฺฉููุฏู ุฏุงุฎู ูพุดุชุจุงู ฺฉูุฏ ๐ช
  </div>
</div>

<div *ngIf="loading" class="loading-state">
  โณ ุฏุฑ ุญุงู ุจุงุฑฺฏุฐุงุฑ ุงุทูุงุนุงุช...
</div>

<div *ngIf="!loading && !shop" class="error-state">
  <p>ูุฑูุดฺฏุงู ุจุง ุงู ุดูุงุณู ูพุฏุง ูุดุฏ.</p>
  <button (click)="goBack()">ุจุงุฒฺฏุดุช ุจู ูุณุช</button>
</div>
