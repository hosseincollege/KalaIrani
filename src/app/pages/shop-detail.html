<div class="shop-detail-page" *ngIf="!loading; else loadingBlock">
  <button class="btn-back" (click)="goBack()">๐ ุจุงุฒฺฏุดุช ุจู ูุณุช ูุฑูุดฺฏุงูโูุง</button>

  <!-- โ ุจุฎุด ฺฉุงูุฑ ูุฑูุดฺฏุงู -->
  <div class="cover-section">
    <img [src]="coverSrc" [alt]="shop.name" (error)="handleImageError(shop)">
  </div>

  <!-- โ ุงุทูุงุนุงุช ูพุงู ูุฑูุดฺฏุงู -->
  <div class="info-box">
    <h2>{{ shop.name || 'ุจุฏูู ูุงู' }}</h2>
    <p>{{ shop.description || 'ุชูุถุญุงุช ุซุจุช ูุดุฏู.' }}</p>

    <p><strong>ุฏุณุชูโุจูุฏ:</strong> {{ shop.category }}</p>
    <p><strong>ุฒููู ุตูุนุช:</strong> {{ shop.industrialField }}</p>
    <p><strong>ุงุณุชุงู:</strong> {{ shop.province }}</p>
    <p><strong>ุดูุฑ:</strong> {{ shop.city }}</p>
    <p><strong>ูุดุงู:</strong> {{ shop.address }}</p>
    <p><strong>ุณุงู ุชุฃุณุณ:</strong> {{ shop.establishedYear }}</p>
    <p><strong>ุชููู:</strong> {{ shop.phone }}</p>
    <p><strong>ุงูู:</strong> {{ shop.email }}</p>
    <p><strong>ูุจุณุงุช:</strong> {{ shop.website }}</p>
  </div>

  <!-- โ ุงุทูุงุนุงุช ฺฉุงุฑุฎุงูู / ฺฉุงุฑฺฏุงู -->
  <div class="manufacturer-box">
    <h3>๐ญ ุงุทูุงุนุงุช ฺฉุงุฑุฎุงูู / ฺฉุงุฑฺฏุงู</h3>
    <p><strong>ูุงู ุชููุฏฺฉููุฏู:</strong> {{ shop.manufacturerName }}</p>
    <p><strong>ููุน ููุงุฏ:</strong> {{ shop.manufacturerType }}</p>
    <p><strong>ููุน ููุงูุฏฺฏ:</strong> {{ shop.branchType }}</p>
    <p><strong>ุดูุงุฑู ูุฌูุฒ:</strong> {{ shop.licenseNumber }}</p>
    <p><strong>ุดูุงุฑู ูุฑุงุฑุฏุงุฏ ููฺฉุงุฑ:</strong> {{ shop.contractNumber }}</p>
  </div>

  <!-- โ ฺฏุงูุฑ -->
  <div class="gallery-box">
    <h3>๐ผ๏ธ ฺฏุงูุฑ ุชุฌูุฒุงุช ู ูุญุตููุงุช</h3>
    <div class="gallery" *ngIf="galleryItems.length > 0; else emptyGallery">
      <img *ngFor="let g of galleryItems" [src]="g" alt="ุชุตูุฑ ฺฏุงูุฑ">
    </div>
    <ng-template #emptyGallery>
      <div class="empty-gallery">ฺฏุงูุฑ ุซุจุช ูุดุฏู ุงุณุช.</div>
    </ng-template>
  </div>

  <!-- โ ูุญุตููุงุช -->
  <div class="info-box">
    <h3>๐ฆ ูุญุตููุงุช ูุฑูุดฺฏุงู</h3>
    <div *ngFor="let p of products">
      <img [src]="p.imageUrl" alt="{{ p.name }}" (error)="handleImageError(p)">
      <h4>{{ p.name }}</h4>
      <p>{{ p.description }}</p>
      <p><strong>๐ฐ ููุช:</strong> {{ p.price | currency:'IRR':'symbol':'1.0' }}</p>
    </div>
  </div>

  <!-- โ ุนููุงุช ูุฏุฑุช -->
  <div class="action-box" *ngIf="isOwner">
    <button (click)="manageProducts(shop.id)">๐ฆ ูุฏุฑุช ูุญุตููุงุช</button>
    <button (click)="editShop(shop.id)">โ๏ธ ูุฑุงุด ูุฑูุดฺฏุงู</button>
    <button (click)="deleteShop(shop.id)">๐๏ธ ุญุฐู ูุฑูุดฺฏุงู</button>
  </div>

  <p class="note">๐ฎ๐ท ุญูุงุช ุงุฒ ุชููุฏ ูู โ ุจุง ุฎุฑุฏ ุงุฒ ุงู ูุฑูุดฺฏุงูุ ุงุฒ ุชููุฏฺฉููุฏู ุฏุงุฎู ูพุดุชุจุงู ฺฉูุฏ ๐ช</p>
</div>

<ng-template #loadingBlock>
  <div class="loading">โณ ุฏุฑ ุญุงู ุจุงุฑฺฏุฐุงุฑ ุงุทูุงุนุงุช...</div>
</ng-template>
